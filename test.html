<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Speed Typing Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 min-h-screen flex items-center justify-center p-4">
    <div class="container mx-auto p-6 max-w-4xl">
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8">
            <div class="flex items-center justify-center gap-3 mb-8">
                <h1 class="text-5xl font-bold text-center text-gray-800">⌨️ Type Master</h1>
                <span class="bg-gradient-to-r from-purple-600 to-pink-500 text-white px-3 py-1 rounded-full text-sm">Pro</span>
            </div>

            <!-- Enhanced Stats Section -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl text-center shadow-sm border border-purple-100">
                    <h2 class="text-lg font-semibold text-gray-700"><i class="fas fa-clock mr-2"></i>Time</h2>
                    <p id="time" class="text-3xl font-bold text-purple-600">60s</p>
                </div>
                <div class="bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl text-center shadow-sm border border-purple-100">
                    <h2 class="text-lg font-semibold text-gray-700"><i class="fas fa-tachometer-alt mr-2"></i>WPM</h2>
                    <p id="wpm" class="text-3xl font-bold text-purple-600">0</p>
                </div>
                <div class="bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl text-center shadow-sm border border-purple-100">
                    <h2 class="text-lg font-semibold text-gray-700"><i class="fas fa-bullseye mr-2"></i>Accuracy</h2>
                    <p id="accuracy" class="text-3xl font-bold text-purple-600">0%</p>
                </div>
                <div class="bg-gradient-to-br from-purple-50 to-white p-4 rounded-xl text-center shadow-sm border border-purple-100">
                    <h2 class="text-lg font-semibold text-gray-700"><i class="fas fa-keyboard mr-2"></i>Characters</h2>
                    <p id="chars" class="text-3xl font-bold text-purple-600">0</p>
                </div>
            </div>

            <!-- Difficulty Selection -->
            <div class="flex justify-center gap-4 mb-6">
                <button data-time="30" class="time-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-purple-100 transition-colors">30s</button>
                <button data-time="60" class="time-btn px-4 py-2 rounded-lg text-white bg-purple-600">60s</button>
                <button data-time="120" class="time-btn px-4 py-2 rounded-lg text-gray-600 hover:bg-purple-100 transition-colors">120s</button>
            </div>

            <!-- Text Display Section -->
            <div class="mb-6">
                <div class="relative">
                    <p id="quote" class="text-xl leading-relaxed text-gray-600 mb-4 min-h-[100px] p-6 bg-gray-50 rounded-xl border border-gray-200"></p>
                    <div id="difficulty" class="absolute top-2 right-2 bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm">
                        Medium
                    </div>
                </div>
                <textarea
                    id="input"
                    class="w-full p-4 text-xl border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 transition-colors"
                    rows="3"
                    placeholder="Start typing here..."
                    disabled
                ></textarea>
            </div>

            <!-- Control Buttons -->
            <div class="flex justify-center gap-4">
                <button
                    id="start"
                    class="bg-gradient-to-r from-purple-600 to-purple-700 text-white px-8 py-3 rounded-xl hover:opacity-90 transition-all font-semibold flex items-center gap-2"
                >
                    <i class="fas fa-play"></i> Start Test
                </button>
                <button
                    id="reset"
                    class="bg-gradient-to-r from-gray-600 to-gray-700 text-white px-8 py-3 rounded-xl hover:opacity-90 transition-all font-semibold flex items-center gap-2"
                >
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>

            <!-- High Scores -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">High Scores</h2>
                <div id="highScores" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- High scores will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const quotes = [
            // Easy quotes
            "The quick brown fox jumps over the lazy dog.",
            "To be or not to be, that is the question.",
            "All that glitters is not gold.",
            // Medium quotes
            "Success is not final, failure is not fatal: it is the courage to continue that counts.",
            "Life is like riding a bicycle. To keep your balance, you must keep moving.",
            "In three words I can sum up everything I've learned about life: it goes on.",
            // Hard quotes
            "The only way to do great work is to love what you do. If you haven't found it yet, keep looking. Don't settle.",
            "Twenty years from now you will be more disappointed by the things that you didn't do than by the ones you did do.",
            "The future belongs to those who believe in the beauty of their dreams, and take action to make them reality."
        ];

        const textElement = document.getElementById("quote");
        const inputElement = document.getElementById("input");
        const wpmElement = document.getElementById("wpm");
        const resetButton = document.getElementById("reset");
        let timeLeft = 60;
        let interval;
        let startTime;
        let text = "";
        let charCount = 0;
        let highScores = JSON.parse(localStorage.getItem('typeTestHighScores')) || [];
        let selectedTime = 60;

        function startGame() {
            const difficulty = Math.floor(Math.random() * 3);
            const startIndex = difficulty * 3;
            text = quotes[startIndex + Math.floor(Math.random() * 3)];
            textElement.textContent = text;
            inputElement.value = "";
            timeLeft = selectedTime;
            document.getElementById('time').textContent = timeLeft + 's';
            charCount = 0;
            document.getElementById('chars').textContent = '0';
            updateHighScores();
            clearInterval(interval);
            inputElement.disabled = false;
            startTime = null;
        }

        function updateTimer() {
            timeLeft--;
            document.getElementById('time').textContent = timeLeft + 's';
            if (timeLeft <= 0) {
                clearInterval(interval);
                inputElement.disabled = true;
            }
        }

        function calculateResults() {
            const words = inputElement.value.trim().split(/\s+/).length;
            const timeSpent = 60 - timeLeft;
            const wpm = Math.round((words / timeSpent) * 60);
            const accuracy = calculateAccuracy(text, inputElement.value);
            
            wpmElement.textContent = wpm;
            document.getElementById('accuracy').textContent = accuracy + "%";
            
            // Save high score
            if (timeLeft === 0) {
                saveHighScore(wpm, accuracy);
            }
        }

        function saveHighScore(wpm, accuracy) {
            highScores.push({
                wpm,
                accuracy,
                date: new Date().toLocaleDateString(),
                time: selectedTime
            });
            highScores.sort((a, b) => b.wpm - a.wpm);
            highScores = highScores.slice(0, 5);
            localStorage.setItem('typeTestHighScores', JSON.stringify(highScores));
            updateHighScores();
        }

        function updateHighScores() {
            const highScoresDiv = document.getElementById('highScores');
            highScoresDiv.innerHTML = highScores
                .map((score, index) => `
                    <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl font-bold ${index === 0 ? 'text-yellow-500' : 'text-gray-400'}">#${index + 1}</span>
                            <div>
                                <p class="font-semibold text-gray-800">${score.wpm} WPM</p>
                                <p class="text-sm text-gray-600">Accuracy: ${score.accuracy}% | ${score.date}</p>
                            </div>
                        </div>
                    </div>
                `)
                .join('');
        }

        function calculateAccuracy(original, typed) {
            const originalLength = original.length;
            const correctLength = typed.length;
            const correctChars = typed.split('').filter((c, i) => c === original[i]).length;
            return ((correctChars / correctLength) * 100).toFixed(2);
        }

        inputElement.addEventListener("input", () => {
            if (!startTime) {
                startTime = new Date();
                interval = setInterval(updateTimer, 1000);
            }
            const typedText = inputElement.value;
            charCount = typedText.length;
            document.getElementById('chars').textContent = charCount;
            calculateResults();
        });

        resetButton.addEventListener("click", startGame);

        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.time-btn').forEach(b => {
                    b.classList.remove('bg-purple-600', 'text-white');
                    b.classList.add('text-gray-600');
                });
                btn.classList.add('bg-purple-600', 'text-white');
                btn.classList.remove('text-gray-600');
                selectedTime = parseInt(btn.dataset.time);
                timeLeft = selectedTime;
                document.getElementById('time').textContent = timeLeft + 's';
            });
        });

        startGame();
    </script>
</body>
</html>
